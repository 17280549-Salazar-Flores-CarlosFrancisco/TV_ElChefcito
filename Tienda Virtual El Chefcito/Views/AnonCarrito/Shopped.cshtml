@using Tienda_Virtual_El_Chefcito.Models
@{
    ViewBag.Title = "Shopped";
    Layout = "~/Views/Shared/_LayoutCompras.cshtml";
}

<style>
    a {
        text-decoration: none;
        color: white;
    }
</style>
<div class="container">

    <div align="center">
        <h2>Mi carrito</h2>
    </div>
    <div>
        <table class="table table-striped table-hover table-responsive info">
            <thead>
                <tr class="info">
                    <th>Producto</th>
                    <th>Nombre del Producto</th>
                    <th>Cantidad</th>
                    <th class="text-center">Precio</th>
                    <th class="text-center">Subtotal</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @if (Session["cart"] != null)
                {
                    foreach (Item item in (List<Item>)Session["cart"])
                    {
                        <tr>
                            <td class="col-md-2">
                                <a class="thumbnail pull-left" href="#"> <img class="media-object" src="~/Content/img/@item.Producto.imagen"> </a>
                            </td>
                            <td class="col-md-2">
                                <h4>@item.Producto.nombre</h4>
                            </td>
                            <td class="col-md-1 col-sm-1" style="text-align:center;">
                                <h4>@item.Cantidad</h4>
                            </td>
                            <td class="col-md-2 text-center">
                                <h4>@item.Producto.precio_venta</h4>
                            </td>
                            <td class="col-md-3 text-center">
                                <h4>@(item.Cantidad * item.Producto.precio_venta)</h4>
                            </td>
                            <td class="col-md-2">
                                <button class="btn btn-danger"><i class="glyphicon glyphicon-remove"></i> <a href="@Url.Action("Quitar", "Carrito", new { id = item.Producto.id_producto})"> Quitar del carrito</a></button>
                            </td>
                        </tr>
                    }
                }

            </tbody>
        </table>
    </div>
    <div class="panel panel-success">
        <div class="panel-heading">
            <h4>Detalles de la orden</h4>
        </div>
        <div class="panel-body">
            @if (Session["cart"] != null)
            {
                <div class="row">
                    @{
                        List<Item> cart = (List<Item>)Session["cart"];
                        var total = cart.Sum(item => item.Producto.precio_venta * item.Cantidad);
                    }

                    <div class="col-md-offset-2 col-md-3 text-right">
                        <strong>Subtotal</strong>
                    </div>
                    <div class="col-md-offset-2 col-md-2 text-right">
                        <strong>$@total</strong>
                    </div>
                </div>
                if (total != 0)
                {
                    <div class="row">
                        <div class="col-md-offset-2 col-md-3 text-right">
                            <strong>Precio de envío:</strong>
                        </div>
                        <div class="col-md-offset-2 col-md-2 text-right">
                            <strong>$200.00</strong>
                        </div>
                    </div>
                    <br />
                    <div class="row">
                        <div class="col-md-offset-2 col-md-3 text-right">
                            <strong>Total:</strong>
                        </div>
                        <div class="col-md-offset-2 col-md-2 text-right">
                            <strong>$@(total = total + 200)</strong>
                        </div>
                    </div>
                }
                <br />
                <div class="row">
                    <div class="col-md-2 text-left">
                        <button class="btn btn-warning"><i class="glyphicon glyphicon-shopping-cart"></i> @Html.ActionLink("Seguir comprando", "Index", "Home")</button>
                    </div>
                </div>
                <h4 class="text-center text-success"><b>Pagar ahora!</b></h4>
                <div class="row">
                    <div class="col-md-offset-4 col-md-2" align="center">
                        <img class="img-responsive" src="~/Content/img/tarjetas/masteramexvisa.jpg" />
                        <button class="btn btn-info"><a href="@Url.Action("Pagar","Pagar")"> Pagar con tarjeta débito/crédito</a></button>

                    </div>
                    <div class="col-md-offset-1 col-md-2" align="center">
                        <img class="img-responsive" src="~/Content/img/tarjetas/paypal.png" />
                        <button class="btn btn-info"><a href="@Url.Action("PagoPayPal","Pagar")"> Pagar con PayPal</a></button>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

